# Руководство по админ-панели портфолио

## Обзор

Админ-панель портфолио предоставляет администраторам и супер-администраторам полный доступ к управлению портфолио всех пользователей системы.

## Доступ к админ-панели

### Права доступа

- **Админ портфолио** (`admin_portfolio`): Полный доступ к управлению портфолио
- **Супер-админ** (`super_admin`): Полный доступ ко всем функциям системы, включая портфолио

### Вход в систему

1. Перейдите на страницу входа `/login`
2. Войдите с учетными данными администратора
3. Перейдите в админ-панель `/admin`
4. Выберите раздел "Портфолио"

## Основные функции

### 1. Просмотр портфолио пользователей

**Путь:** `/admin/portfolio`

**Возможности:**
- Выбор конкретного пользователя из списка
- Просмотр всех записей портфолио выбранного пользователя
- Фильтрация по типу портфолио (общее, публикации, преподавание, достижения, дополнительно)
- Поиск по названию или описанию записей
- Просмотр детальной информации о каждой записи

### 2. Управление файлами

**Функции:**
- Просмотр всех прикрепленных файлов
- Скачивание отдельных файлов
- Скачивание всех файлов пользователя
- Просмотр превью изображений
- Информация о размере и дате загрузки файлов

### 3. Экспорт данных

**Функции:**
- Экспорт портфолио выбранного пользователя в Word документ (.doc)
- Красивое форматирование с заголовками, разделами и стилями
- Включение информации о пользователе и его записях
- Автоматическое именование файлов с именем пользователя и датой экспорта
- Экспорт доступен только после выбора пользователя
- Документ готов для печати и презентации

### 4. Аналитика

**Путь:** `/admin/portfolio/analytics`

**Статистика:**
- Общее количество пользователей и записей
- Распределение записей по типам
- Топ пользователей по количеству записей
- Последняя активность пользователей
- Среднее количество записей на пользователя

## Интерфейс

### Главная страница

1. **Заголовок** - навигация и кнопки действий
2. **Статистические карточки** - основные показатели
3. **Фильтры** - поиск и фильтрация данных
4. **Таблица записей** - основной список портфолио
5. **Модальное окно** - детальный просмотр записей

### Выбор пользователя и фильтры

- **Выбор пользователя**: Выпадающий список всех пользователей системы с отображением имени, email и роли
- **Поиск**: По названию или описанию записей (доступен после выбора пользователя)
- **Тип портфолио**: Фильтр по категориям (общее, публикации, преподавание, достижения, дополнительно)

### Модальное окно деталей

При клике на кнопку "Просмотр" открывается модальное окно с:

1. **Информация о пользователе**:
   - Имя и email
   - Роль в системе
   - ID пользователя

2. **Основная информация**:
   - Тип записи
   - Название и описание
   - Даты создания и обновления

3. **Детальная информация** (в зависимости от типа):
   - Для общих записей: ФИО, должность, кафедра, образование
   - Для публикаций: авторы, журнал, год, DOI, цитирования
   - Для преподавания: курс, семестр, количество студентов
   - Для достижений: организация, дата, категория, результат
   - Для дополнительной деятельности: организация, роль, период

4. **Прикрепленные файлы**:
   - Список всех файлов
   - Информация о размере и дате загрузки
   - Кнопки для просмотра и скачивания
   - Возможность скачать все файлы сразу

## Утилиты для работы с файлами

### Типы файлов

- **PDF** - документы (красная иконка)
- **Изображения** - JPG, PNG, GIF и др. (зеленая иконка)
- **Документы** - DOC, DOCX, XLS, XLSX и др. (синяя иконка)

### Функции скачивания

- **Скачивание одного файла**: Клик по кнопке скачивания
- **Скачивание всех файлов**: Кнопка "Скачать все" (если файлов больше одного)
- **Просмотр превью**: Для изображений доступен просмотр в новой вкладке

## Безопасность

### Права доступа

- Только пользователи с ролью `admin_portfolio` или `super_admin` имеют доступ
- Автоматическая проверка прав при загрузке страницы
- Перенаправление на главную админ-панель при отсутствии прав

### Защита данных

- Все операции выполняются через сервисы с проверкой прав
- Логирование действий администратора
- Безопасное скачивание файлов

## Технические детали

### Структура данных

```typescript
type PortfolioItemWithUser = PortfolioItem & {
  userName: string;
  userEmail: string;
  userRole: string;
};
```

### Основные компоненты

- `AdminPortfolioPage` - главная страница управления
- `PortfolioAnalyticsPage` - страница аналитики
- `fileUtils` - утилиты для работы с файлами

### Интеграция

- `portfolioService` - сервис для работы с портфолио
- `userService` - сервис для работы с пользователями
- `AuthContext` - контекст авторизации

## Рекомендации по использованию

1. **Регулярная проверка**: Периодически просматривайте новые записи портфолио
2. **Экспорт данных**: Регулярно экспортируйте данные для резервного копирования
3. **Аналитика**: Используйте страницу аналитики для мониторинга активности
4. **Файлы**: Проверяйте загруженные файлы на соответствие требованиям

## Поддержка

При возникновении проблем:

1. Проверьте права доступа к системе
2. Убедитесь, что у вас есть роль `admin_portfolio` или `super_admin`
3. Обратитесь к системному администратору

## Экспорт портфолио для пользователей

Обычные пользователи также могут экспортировать свое портфолио в Word документ:

1. Перейдите в раздел "Портфолио" в личном кабинете
2. Нажмите кнопку "Экспорт в Word" в правом верхнем углу
3. Документ автоматически скачается с красивым форматированием

**Особенности экспорта:**
- Документ содержит все разделы портфолио пользователя
- Красивое оформление с заголовками и стилями
- Информация о прикрепленных файлах
- Готов для печати и презентации
- Автоматическое именование файла

## Обновления

Система автоматически обновляет данные при изменениях в портфолио пользователей. Для получения актуальной информации обновите страницу.
